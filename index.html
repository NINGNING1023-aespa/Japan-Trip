<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Japan Journey 2025</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <link rel="apple-touch-icon" href="https://images.prestigeonline.com/wp-content/uploads/sites/6/2025/06/16143016/usagi-chiikawa-characters-820x1024-1.jpeg">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --color-black: #0a0a0a;
            --color-white: #ffffff;
            --color-red: #bc002d; 
            --font-serif: 'Playfair Display', serif;
            --font-sans: 'Inter', 'Noto Sans SC', sans-serif;
        }

        body {
            font-family: var(--font-sans);
            background-color: var(--color-black);
            color: var(--color-white);
            margin: 0;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            padding-bottom: env(safe-area-inset-bottom);
        }

        ::-webkit-scrollbar { width: 0px; background: transparent; }

        .serif { font-family: var(--font-serif); }
        .tracking-fashion { letter-spacing: 0.25em; }
        
        /* Animation */
        .fade-in-up { animation: fadeInUp 1s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(40px); }
        .fade-out-absolute { animation: fadeOutAbsolute 0.8s ease-out forwards; }
        .slide-up-leave { animation: slideUpLeave 1s cubic-bezier(0.7, 0, 0.3, 1) forwards; }
        
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeOutAbsolute { to { opacity: 0; visibility: hidden; } }
        @keyframes slideUpLeave { to { transform: translateY(-120vh); } }

        .delay-200 { animation-delay: 0.2s; }
        .delay-500 { animation-delay: 0.5s; }
        .delay-700 { animation-delay: 0.7s; }

        /* Nav */
        .day-nav-item.active {
            color: var(--color-red);
            border-left: 3px solid var(--color-red);
            padding-left: 1.5rem;
            font-family: var(--font-serif);
            font-style: italic;
            background: linear-gradient(90deg, rgba(188,0,45,0.05) 0%, transparent 100%);
        }
        .day-nav-item { transition: all 0.4s ease; border-left: 3px solid transparent; }

        .nav-link.active::after { width: 100%; }
        .nav-link::after {
            content: ''; display: block; width: 0; height: 1px; 
            background: var(--color-red); transition: width 0.3s; margin-top: 4px;
        }
        
        .avatar-border { border: 1px solid rgba(0,0,0,0.6); box-shadow: 0 4px 6px rgba(0,0,0,0.3); }

        /* iPod CSS */
        .ipod-case {
            background: linear-gradient(135deg, #e6e6e6 0%, #cccccc 50%, #b3b3b3 100%);
            box-shadow: inset 1px 1px 2px rgba(255,255,255,0.9), inset -1px -1px 2px rgba(0,0,0,0.2), 15px 25px 50px rgba(0,0,0,0.6);
            border-radius: 30px;
        }
        .click-wheel {
            background: #f8f8f8;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            cursor: pointer;
        }
        .click-wheel:active .center-button { transform: scale(0.96); }
        .center-button {
            background: linear-gradient(180deg, #dddddd 0%, #aaaaaa 100%);
            box-shadow: inset 0 1px 2px rgba(255,255,255,0.8);
        }

        .blur-layer-ready { opacity: 0; visibility: hidden; transition: opacity 0.8s ease-in-out; }
        .blur-layer-active { opacity: 1; visibility: visible; }

        /* Sound Wave */
        .sound-wave-container {
            display: flex;
            flex-direction: column;
            align-items: center; 
            justify-content: center;
            height: 100%;
            gap: 3px;
            padding-top: 20px;
            padding-bottom: 20px;
        }
        .wave-line-item {
            height: 3px;
            background-color: #bc002d;
            border-radius: 2px;
            opacity: 0.7;
            transition: all 0.5s ease-in-out;
        }
        .wave-line-item:hover {
            opacity: 1;
            transform: scaleX(1.2);
            box-shadow: 0 0 5px rgba(188,0,45,0.8);
        }

        @media print {
            .no-print { display: none !important; }
            body { background: white; color: black; }
            #scene-container { display: none !important; }
            #main-content { opacity: 1 !important; display: block !important; position: static !important; }
        }
    </style>
</head>
<body>

    <audio id="audio-player" preload="auto" src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Chad_Crouch/Arps/Chad_Crouch_-_Elisions.mp3"></audio>

    <div id="scene-container" class="fixed inset-0 z-[100] bg-black overflow-hidden">
        
        <div class="absolute inset-0 z-0">
            <img src="https://www.agoda.com/wp-content/uploads/2024/04/toyko-1244x700.jpg" 
                 class="w-full h-full object-cover opacity-80">
            <div class="absolute inset-0 bg-black/30"></div>
        </div>

        <div id="intro-layer" class="absolute inset-0 z-20 flex flex-col items-center justify-center transition-opacity duration-800">
            <div class="text-center text-white px-4">
                <p class="text-xs md:text-sm uppercase tracking-[0.4em] mb-6 text-red-500 font-bold fade-in-up">The Winter Collection</p>
                <h1 class="text-6xl md:text-8xl lg:text-9xl serif font-bold tracking-tighter mb-8 text-white drop-shadow-2xl fade-in-up delay-200">
                    JAPAN<span class="text-red-600">.</span>
                </h1>
                <div class="w-[1px] h-16 bg-white/50 mx-auto mb-8 fade-in-up delay-500"></div>
                <p class="text-sm font-light tracking-[0.3em] uppercase mb-12 text-gray-200 fade-in-up delay-500">
                    DECEMBER 2025 ¬∑ KYOTO & TOKYO
                </p>
                <button onclick="goToLogin()" class="fade-in-up delay-700 group relative px-10 py-4 border border-white/50 hover:border-white transition-all duration-300 overflow-hidden bg-white/10 backdrop-blur-md cursor-pointer">
                    <span class="relative z-10 text-xs font-bold tracking-[0.3em] uppercase group-hover:text-black transition-colors duration-300">Start Journey</span>
                    <div class="absolute inset-0 bg-white transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
                </button>
            </div>
        </div>

        <div id="login-layer" class="absolute inset-0 z-30 blur-layer-ready flex flex-col items-center justify-center overflow-y-auto">
            <div class="absolute inset-0 bg-black/40 backdrop-blur-md z-[-1]"></div>
            <div class="flex flex-col md:flex-row items-center justify-center gap-16 md:gap-32 transform scale-95 transition-transform duration-1000" id="login-content">
                
                <div class="ipod-case w-[300px] h-[480px] p-6 flex flex-col items-center relative shadow-2xl flex-shrink-0 my-8">
                    <div class="w-full h-[190px] mb-8 overflow-hidden relative flex flex-col border-2 border-gray-800 bg-[#222] rounded-lg">
                        <div class="bg-gradient-to-b from-gray-700 to-gray-800 h-5 w-full flex justify-between items-center px-2">
                            <div class="flex items-center gap-1">
                                <span class="text-[9px] text-blue-300 font-bold" id="play-icon">||</span>
                                <span class="text-[9px] text-white font-mono">Fujii Kaze</span>
                            </div>
                            <div class="w-4 h-2 border border-white/50 flex p-[1px]"><div class="h-full w-[80%] bg-green-400"></div></div>
                        </div>
                        <div class="flex-1 flex flex-row items-center p-3 gap-3 bg-[#111]">
                            <img id="ipod-art" src="https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" class="w-24 h-24 object-cover border border-gray-600 shadow-lg">
                            <div class="flex flex-col w-32 overflow-hidden">
                                <span id="ipod-title" class="text-white text-xs font-bold truncate mb-1">Nan-Nan</span>
                                <span id="ipod-artist" class="text-gray-400 text-[10px] truncate">Fujii Kaze</span>
                                <span id="ipod-album" class="text-gray-600 text-[9px] mt-2 truncate">HELP EVER HURT NEVER</span>
                            </div>
                        </div>
                        <div class="h-7 bg-white flex items-center px-2 gap-2 border-t border-gray-300">
                            <span id="curr-time" class="text-[9px] text-black font-mono">0:00</span>
                            <div class="flex-1 h-1.5 bg-gray-300 rounded-full overflow-hidden relative">
                                <div id="ipod-bar" class="h-full bg-blue-500 w-0 transition-all duration-200"></div>
                            </div>
                            <span id="total-time" class="text-[9px] text-black font-mono">-3:42</span>
                        </div>
                    </div>
                    <div class="click-wheel w-[180px] h-[180px] rounded-full relative flex items-center justify-center">
                        <span class="absolute top-4 text-[10px] font-bold text-gray-400 tracking-widest">MENU</span>
                        <div onclick="togglePlay()" class="absolute bottom-4 left-1/2 -translate-x-1/2 w-12 h-12 flex items-center justify-center hover:bg-black/5 rounded-full z-10 cursor-pointer"><span class="text-[14px] text-gray-500 mt-2">‚ñ∂||</span></div>
                        <div onclick="prevSong()" class="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 flex items-center justify-center hover:bg-black/5 rounded-full z-10 cursor-pointer"><span class="text-[14px] text-gray-500 mr-2">|‚óÄ‚óÄ</span></div>
                        <div onclick="nextSong()" class="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 flex items-center justify-center hover:bg-black/5 rounded-full z-10 cursor-pointer"><span class="text-[14px] text-gray-500 ml-2">‚ñ∂‚ñ∂|</span></div>
                        <div class="center-button w-[60px] h-[60px] rounded-full z-20 cursor-pointer" onclick="togglePlay()"></div>
                    </div>
                </div>

                <div class="flex flex-col gap-8">
                    <div class="text-white/60 text-xs tracking-[0.3em] uppercase text-center md:text-left mb-2">Select User</div>
                    <div onclick="enterMainSite('hcj')" class="group flex items-center gap-6 cursor-pointer">
                        <div class="relative w-20 h-20 md:w-24 md:h-24 rounded-full bg-white avatar-border overflow-hidden transition-all duration-300 group-hover:scale-110 group-hover:ring-4 ring-red-600/30">
                            <img src="https://images.prestigeonline.com/wp-content/uploads/sites/3/2025/05/28185138/hachiware-chiikawa-characters-820x1024.jpg" class="w-full h-full object-cover scale-110">
                        </div>
                        <span class="text-white text-2xl serif italic tracking-widest group-hover:text-red-500 transition-colors">hcj</span>
                    </div>
                    <div onclick="enterMainSite('ee')" class="group flex items-center gap-6 cursor-pointer">
                        <div class="relative w-20 h-20 md:w-24 md:h-24 rounded-full bg-white avatar-border overflow-hidden transition-all duration-300 group-hover:scale-110 group-hover:ring-4 ring-red-600/30">
                            <img src="https://images.prestigeonline.com/wp-content/uploads/sites/6/2025/06/16143016/usagi-chiikawa-characters-820x1024-1.jpeg" class="w-full h-full object-cover scale-110">
                        </div>
                        <span class="text-white text-2xl serif italic tracking-widest group-hover:text-red-500 transition-colors">ee</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="main-content" class="hidden opacity-0 transition-opacity duration-1000">
        
        <nav class="sticky top-0 z-50 bg-black/95 backdrop-blur border-b border-white/10 no-print transition-all duration-300">
            <div class="container mx-auto px-6 py-4 flex justify-between items-center">
                <div class="text-lg md:text-xl font-bold serif tracking-tight text-white flex items-center gap-2">
                    <span class="w-2 h-2 bg-red-600 rounded-full"></span> <span id="nav-site-title">hcj in Japan</span>
                </div>
                <div class="flex items-center gap-8">
                    <div class="hidden md:flex gap-8 text-[11px] font-bold uppercase tracking-widest text-gray-500">
                        <a href="#intro" class="nav-link hover:text-white transition">Intro</a>
                        <a href="#prep" class="nav-link hover:text-white transition">Essentials</a>
                        <a href="#overview" class="nav-link hover:text-white transition">Overview</a>
                        <a href="#daily" class="nav-link hover:text-white transition">Itinerary</a>
                        <a href="#author" class="nav-link hover:text-white transition">About</a>
                    </div>
                    <div class="flex items-center gap-3 pl-6 border-l border-white/10">
                        <span id="nav-username" class="text-xs text-white font-serif italic hidden lg:block"></span>
                        <div class="w-8 h-8 rounded-full border border-gray-500 overflow-hidden"><img id="nav-avatar" src="" class="w-full h-full object-cover scale-110"></div>
                    </div>
                </div>
            </div>
        </nav>

        <section id="intro" class="relative h-[80vh] flex items-center justify-center overflow-hidden">
            <div class="absolute inset-0 z-0"><img src="https://www.snowmonkeyresorts.com/wp-content/uploads/2021/09/467827_m.jpg" class="w-full h-full object-cover filter brightness-[0.6]"></div>
            <div class="relative z-10 max-w-4xl text-center px-6">
                <span class="text-red-500 text-xs tracking-widest uppercase mb-4 block">Concept</span>
                <h2 class="serif text-4xl md:text-6xl lg:text-7xl italic text-white mb-10 leading-tight">"Red Leaves,<br/>White Snow & Neon."</h2>
                <div class="w-24 h-[1px] bg-red-600 mx-auto mb-10"></div>
                <p class="text-lg md:text-xl font-light leading-relaxed text-gray-300 max-w-2xl mx-auto">Ëøô‰∏ç‰ªÖ‰ªÖÊòØ‰∏ÄÊ¨°ÊóÖË°åÔºåËøôÊòØ‰∏ÄÂú∫ÊµÅÂä®ÁöÑÁõõÂÆ¥„ÄÇ<br>‰ªé‰∫¨ÈÉΩÂçÉÂπ¥ÁöÑÁ¶ÖÊÑèÂè§ÂàπÔºåÂà∞‰∏ú‰∫¨Â°î‰∏ãÊ≤∏ËÖæÁöÑÂú£ËØûÂ§ú„ÄÇ</p>
            </div>
        </section>

        <section id="prep" class="py-24 bg-zinc-900 border-b border-zinc-800">
            <div class="container mx-auto px-6">
                <div class="flex flex-col lg:flex-row gap-16">
                    <div class="lg:w-1/4">
                        <span class="text-red-600 text-xs font-bold tracking-widest uppercase mb-3 block">01 / Checklist</span>
                        <h2 class="serif text-4xl md:text-5xl text-white mb-6">Essentials.</h2>
                    </div>
                    <div class="lg:w-3/4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-12 gap-y-12">
                        <div id="essentials-grid" class="contents"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="overview" class="py-24 bg-black border-b border-zinc-800">
            <div class="container mx-auto px-6">
                 <span class="text-red-600 text-xs font-bold tracking-widest uppercase mb-3 block">02 / Overview</span>
                 <h2 class="serif text-4xl md:text-5xl text-white mb-12">Ë°åÁ®ãÊó∂Èó¥ËΩ¥</h2>
                 <div id="overview-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-[1px] bg-zinc-800 border border-zinc-800"></div>
            </div>
        </section>

        <section id="daily" class="min-h-screen bg-white text-black flex flex-col md:flex-row relative z-20 scroll-mt-20">
            <aside class="w-full md:w-1/4 lg:w-1/5 bg-gray-50 border-r border-gray-200 sticky top-0 md:top-[60px] h-auto md:h-[calc(100vh-60px)] z-30">
                <div class="p-6 md:p-8 h-full overflow-y-auto">
                    <span class="text-red-600 text-xs font-bold tracking-widest uppercase mb-6 block">03 / Itinerary</span>
                    <div id="day-nav-container" class="space-y-1 flex md:block overflow-x-auto gap-2 md:gap-0"></div>
                </div>
            </aside>
            <div class="w-full md:w-3/4 lg:w-4/5 relative bg-white min-h-[80vh]">
                <div id="day-content-container" class="p-8 md:p-16 lg:p-24 max-w-6xl mx-auto flex gap-12">
                    </div>
            </div>
        </section>

        <section id="author" class="relative h-screen flex items-center justify-center bg-zinc-900 overflow-hidden">
            <div class="absolute inset-0 z-0">
                <img src="https://essential-japan.com/wp-content/uploads/2025/07/chiikawa-anime-4-key-art-1024x538.jpg" 
                     alt="Chiikawa Trio" 
                     class="w-full h-full object-cover opacity-60">
                <div class="absolute inset-0 bg-black/40"></div>
            </div>
            <div class="relative z-10 text-center px-4">
                <p class="serif text-3xl md:text-5xl lg:text-7xl text-white font-light italic leading-tight tracking-wide">"This is everything <br/><span class="text-red-500 font-normal">hcj</span> done for <span class="text-red-500 font-normal">ee</span>."</p>
                <div class="mt-16 w-12 h-1 bg-white/20 mx-auto"></div>
                <div class="mt-8"><span class="text-[10px] text-gray-300 uppercase tracking-[0.4em]">Designed with Love ¬∑ 2025</span></div>
            </div>
        </section>

        <footer class="bg-black py-10 text-center border-t border-zinc-900 text-[10px] text-zinc-600 uppercase tracking-widest no-print">¬© 2025 hcj in Japan Edition.</footer>
    </div>

    <script>
        const users = {
            hcj: { name: 'hcj', avatar: 'https://images.prestigeonline.com/wp-content/uploads/sites/3/2025/05/28185138/hachiware-chiikawa-characters-820x1024.jpg' },
            ee: { name: 'ee', avatar: 'https://images.prestigeonline.com/wp-content/uploads/sites/6/2025/06/16143016/usagi-chiikawa-characters-820x1024-1.jpeg' }
        };

        // Fujii Kaze Playlist
        const playlist = [
            { title: "Nan-Nan", artist: "Fujii Kaze", album: "HELP EVER HURT NEVER", length: 320, cover: "https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" },
            { title: "Mo-Eh-Wa", artist: "Fujii Kaze", album: "HELP EVER HURT NEVER", length: 301, cover: "https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" },
            { title: "YASASHISA", artist: "Fujii Kaze", album: "HELP EVER HURT NEVER", length: 240, cover: "https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" },
            { title: "Kiri Ga Naikara", artist: "Fujii Kaze", album: "HELP EVER HURT NEVER", length: 217, cover: "https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" },
            { title: "Tsumi No Kaori", artist: "Fujii Kaze", album: "HELP EVER HURT NEVER", length: 214, cover: "https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" },
            { title: "Cho Si Noccha Te", artist: "Fujii Kaze", album: "HELP EVER HURT NEVER", length: 282, cover: "https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" },
            { title: "Tokuninai", artist: "Fujii Kaze", album: "HELP EVER HURT NEVER", length: 205, cover: "https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" },
            { title: "Shinunoga E-Wa", artist: "Fujii Kaze", album: "HELP EVER HURT NEVER", length: 185, cover: "https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" },
            { title: "Kazeyo", artist: "Fujii Kaze", album: "HELP EVER HURT NEVER", length: 284, cover: "https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" },
            { title: "Sayonara Baby", artist: "Fujii Kaze", album: "HELP EVER HURT NEVER", length: 260, cover: "https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" },
            { title: "Kaerou", artist: "Fujii Kaze", album: "HELP EVER HURT NEVER", length: 284, cover: "https://meet.eslite.com/CMS/Files/@M091/2024-09/2024_fujii_kaze/009_fujii_kaze.jpg" }
        ];

        const essentialsData = [
            { title: "Documents", cn: "ËØÅ‰ª∂", items: ["Êä§ÁÖß Passport (ÊúâÊïàÊúüË¶ÜÁõñ)", "VJW ‰∫åÁª¥Á†ÅÊà™Âõæ (Visit Japan)", "Êú∫Á•®Ë°åÁ®ãÂçï PDF", "ÈÖíÂ∫óÈ¢ÑËÆ¢Á°ÆËÆ§‰ø° PDF"] },
            { title: "Finance", cn: "ËµÑÈáë", items: ["ÂÆû‰ΩìË•øÁìúÂç° (Suica/Icoca)", "Áé∞Èáë (5-10‰∏áÊó•ÂÖÉÂ§áÈõ∂Èí±)", "Visa/Mastercard ‰ø°Áî®Âç°", "Âú∞ÈìÅ72hÂà∏ x2 & Êñ∞Âπ≤Á∫øÁ•®"] },
            { title: "Tech", cn: "ÁîµÂ≠ê", items: ["ÊµÅÈáèÂç°/eSIM (ËêΩÂú∞ÂºÄ)", "ÂÖÖÁîµÂÆù x2 & ‰∏§Â≠îÊâÅÂ§¥ÊèíÂ∫ß", "Google Maps + Êç¢‰πòÊ°àÂÜÖ", "ÊöñÂÆùÂÆù & ËàíÈÄÇËµ∞Ë∑ØÈûã"] },
            { title: "Hotels", cn: "ÈÖíÂ∫ó", type: "hotel", items: [
                {city: "‰∫¨ÈÉΩ", name: "Ala Hotel Kyoto", addr: "518 Shiokoji-cho, Higashinotoin-dori"},
                {city: "‰∏ú‰∫¨", name: "Hotel Hillarys Akasaka", addr: "3-13-10 Akasaka, Minato-ku"}
            ]},
            { title: "Emergency", cn: "Á¥ßÊÄ•", type: "emergency", items: [
                {num: "110", label: "Ë≠¶ÂØü Police"},
                {num: "119", label: "Ê∂àÈò≤/ÊÄ•Êïë Fire"},
                {num: "12308", label: "È¢Ü‰øùÁÉ≠Á∫ø"}
            ]}
        ];

        const overviewData = [
            {day: 1, loc: "KYOTO", act: "ÊäµËææÂÖ≥Ë•ø ¬∑ ÂØøÂè∏‰πãÂ§ú", date: "Dec 14"},
            {day: 2, loc: "KYOTO", act: "‰∫¨ÈÉΩÂíåÊúçÊëÑÂΩ±Êó•", date: "Dec 15"},
            {day: 3, loc: "KYOTO", act: "Êñ∞È£éÈ¶Ü ¬∑ Èî¶Â∏ÇÂú∫", date: "Dec 16"},
            {day: 4, loc: "OSAKA", act: "Â§ßÈò™ÂæÄËøî ¬∑ ÂøÉÊñãÊ°•", date: "Dec 17"},
            {day: 5, loc: "TOKYO", act: "Êñ∞Âπ≤Á∫ø ¬∑ ‰∏ú‰∫¨Â°î", date: "Dec 18"},
            {day: 6, loc: "ATAMI", act: "Ê±†Ë¢ã ¬∑ ÁÉ≠Êµ∑Ëä±ÁÅ´", date: "Dec 19"},
            {day: 7, loc: "TOKYO", act: "‰∏ú‰∫¨ÂíåÊúçÊëÑÂΩ±Êó•", date: "Dec 20"},
            {day: 8, loc: "TOKYO", act: "Ë°®ÂèÇÈÅì ¬∑ Ê∂©Ë∞∑Êó∂Â∞ö", date: "Dec 21"},
            {day: 9, loc: "DISNEY", act: "Ëø™Â£´Â∞ºÊµ∑Ê¥ã DisneySea", date: "Dec 22"},
            {day: 10, loc: "TOKYO", act: "‰∏∞Ê¥≤Â∏ÇÂú∫ ¬∑ Êñ∞ÂÆø", date: "Dec 23"},
            {day: 11, loc: "HOME", act: "‰∏äÈáé ¬∑ Âπ≥ÂÆâËøîÁ®ã", date: "Dec 24"},
        ];

        const dailyData = [
            {
                day: 1, intensity: 3, title: "ÂâçÂæÄÂÖ≥Ë•øÊú∫Âú∫ÊäµËææÊó•", 
                schedule: [
                    {time: "15:00", title: "ÈôçËêΩÂÖ≥Ë•øÊú∫Âú∫ (KIX)", desc: "ee: CA857 (‰∏äÊµ∑Êµ¶‰∏ú-ÂÖ≥Ë•øT1 11:30-15:00)\nhcj: CZ8107 (ÂπøÂ∑ûÁôΩ‰∫ëT2-ÂÖ≥Ë•øT1 10:25-15:00)"},
                    {time: "16:00", title: "‰∫§ÈÄöÔºöHaruka ÁâπÊÄ•", desc: "ÂÖ≥Ë•øÊú∫Âú∫Á´ô‰πòÂùê JR HARUKA ÁâπÊÄ• (‰∫¨ÈÉΩÊñπÂêë)„ÄÇ\nÁ∫¶ 80 ÂàÜÈíüÁõ¥Ëææ‰∫¨ÈÉΩÁ´ô„ÄÇ"},
                    {time: "17:30", title: "ÂÖ•‰ΩèÔºöAla Hotel Kyoto", desc: "ÊäµËææ‰∫¨ÈÉΩÁ´ôÂêéÔºå‰ªé„ÄêÂú∞‰∏ã‰∏úÂè£„ÄëÂá∫Á´ôÔºåÊ≠•Ë°å 2 ÂàÜÈíüÂç≥Ëææ„ÄÇ\nÂú∞ÂùÄÔºö518 Shiokoji-cho, Higashinotoin-dori„ÄÇ"},
                    {time: "19:45", title: "ÊôöÈ§êÔºöÈÆ®È∫ªÂ∏É Êù±Â±±", desc: "üìç Â∑≤È¢ÑÁ∫¶„ÄÇËêΩÂú∞È¶ñÈ§êÔºå‰∫´ÂèóÊ≠£ÂÆóÂØøÂè∏„ÄÇ"}
                ]
            },
            {
                day: 2, intensity: 4, title: "‰∫¨ÈÉΩÂíåÊúçÊëÑÂΩ±Êó•", 
                schedule: [
                    {time: "09:00", title: "ÂíåÊúçÊëÑÂΩ± & Âª∫‰ªÅÂØ∫", desc: "‰∏äÂçàÂâçÂæÄ„ÄêÂª∫‰ªÅÂØ∫„ÄëÊãçÊëÑ„ÄÇ\nÁúãÁÇπÔºöÂèåÈæôÂõæ„ÄÅÊΩÆÈü≥Â∫≠ (ÊûØÂ±±Ê∞¥)„ÄÇ"},
                    {time: "13:00", title: "Â∫≠Èô¢Â∑°Á§º", desc: "Ë∑ØÁ∫øÔºöÊó†ÈÇªËè¥ (Êó•ÂºèÂ∫≠Âõ≠) ‚Üí ÂçóÁ¶ÖÂØ∫ (Ê∞¥Ë∑ØÈòÅ) ‚Üí Ê∞∏ËßÇÂ†Ç„ÄÇ\nÁªèÂÖ∏ÁöÑ‰∏úÂ±±Êº´Ê≠•Ë∑ØÁ∫ø„ÄÇ"},
                    {time: "18:15", title: "ÊôöÈ§êÔºöÁâõÊ•Ω‰∫≠ (Gyurakutei)", desc: "üìç Â∑≤È¢ÑÁ∫¶„ÄÇ\nÊó•ÂºèÁÉ§ËÇâ (Yakiniku)ÔºåË°•ÂÖÖ‰ΩìÂäõ„ÄÇ"}
                ]
            },
            {
                day: 3, intensity: 3, title: "‰∫¨ÈÉΩË¥≠Áâ©Êó•", 
                schedule: [
                    {time: "10:30", title: "Ëµ∑ÁÇπÔºö‰πå‰∏∏Âæ°Ê±†", desc: "‰πòÂùêÂú∞ÈìÅËá≥„Äê‰πå‰∏∏Âæ°Ê±†Á´ô„Äë„ÄÇ"},
                    {time: "AM", title: "Êñ∞È£éÈ¶Ü (ShinPuhKan)", desc: "Beams Japan, Pilgrim Surf, Maison Kitsun√©„ÄÇ"},
                    {time: "PM", title: "‰∏âÊù°ÈÄö & Ê≤≥ÂéüÁî∫", desc: "Human Made 1928 (ÈúÄÈ¢ÑÁ∫¶), 1928 Cafe„ÄÇ\nPaul Smith, Arc'teryx, Graphpaper„ÄÇ\nBALÂïÜÂú∫ (Tomorrowland), Ëó§‰∫ïÂ§ß‰∏∏ (The North Face), Mina (Loft)„ÄÇ"},
                    {time: "17:00", title: "ÁªàÁÇπÔºöLe Labo", desc: "‰∫¨ÈÉΩÁî∫ÂÆ∂Â∫óÔºåÈù†ËøëÈ∏≠Â∑ù„ÄÇ"},
                    {time: "Eve", title: "Èî¶Â∏ÇÂú∫", desc: "ÂêÉÂ∞èÂêÉÊî∂Â∞æ„ÄÇ"}
                ]
            },
            {
                day: 4, intensity: 5, title: "Â§ßÈò™‰∏ÄÊó•ÂæÄËøîÊó•", 
                schedule: [
                    {time: "INFO", title: "‰∫§ÈÄöÁ•®Âà∏", desc: "‚ö†Ô∏è JR Âà∑ IC Âç° + Â§ßÈò™Âú∞ÈìÅÂ∑¥Â£´‰∏ÄÊó•Âà∏ (Enjoy Eco Card)„ÄÇ"},
                    {time: "10:00", title: "‰∫¨ÈÉΩ -> Â§ßÈò™", desc: "‰∫¨ÈÉΩÁ´ô‰πòÂùê JR ‰∫¨ÈÉΩÁ∫ø (Êñ∞Âø´ÈÄü) Ëá≥Â§ßÈò™Á´ô (30ÂàÜÈíü)„ÄÇ"},
                    {time: "11:00", title: "Á¨¨‰∏ÄÁ´ôÔºöÊ¢ÖÁî∞ (ÂçàÈ§ê)", desc: "Á•ûËôéÊãâÈù¢ (Â§ßÈò™Á´ôÈôÑËøëÂàÜÂ∫óÊàñËÇ•ÂêéÊ°•Êú¨Â∫ó)„ÄÇ"},
                    {time: "13:00", title: "Á¨¨‰∫åÁ´ôÔºöÈªëÈó®Â∏ÇÂú∫", desc: "Ê¢ÖÁî∞ÂùêÂæ°Â†ÇÁ≠ãÁ∫ø -> ÈöæÊ≥¢Êç¢ÂçÉÊó•ÂâçÁ∫ø -> Êó•Êú¨Ê°• (10Âè∑Âè£)„ÄÇ\nÂêÉÊµ∑È≤ú/ÂíåÁâõ„ÄÇ"},
                    {time: "14:30", title: "Á¨¨‰∏âÁ´ôÔºöÈöæÊ≥¢/ÈÅìÈ°øÂ†Ä", desc: "Ê≠•Ë°åÂâçÂæÄ„ÄÇÊâìÂç°ÔºöÈù¢ÂåÖË∂Ö‰∫∫Ë¥©ÂçñÊú∫„ÄÅStrawberry Mania„ÄÅÊ†ºÂäõÈ´ò‰∫∫Ë°åÁ´ãÁâå„ÄÇ"},
                    {time: "16:00", title: "Á¨¨ÂõõÁ´ôÔºöÂøÉÊñãÊ°•", desc: "Parco (6F Chiikawa/ÂêâÂçúÂäõ)„ÄÇMOK Photo ÊãçÁÖß„ÄÇ"},
                    {time: "18:00", title: "Á¨¨‰∫îÁ´ôÔºöÊ¢ÖÁî∞ (Ë°ÄÊãº)", desc: "Âæ°Â†ÇÁ≠ãÁ∫øËá≥Ê¢ÖÁî∞„ÄÇ\nÈò™ÊÄ•‰∏âÁï™Ë°ó (Chiikawa/Kiddy Land), KITTE, Grand Green, KAMO (ÁêÉË°£)„ÄÇ"},
                    {time: "21:00", title: "ËøîÁ®ã", desc: "JR Êñ∞Âø´ÈÄüËøîÂõû‰∫¨ÈÉΩ„ÄÇ"}
                ]
            },
            {
                day: 5, intensity: 3, title: "ÂâçÂæÄ‰∏ú‰∫¨ÂÜ¨Êó•Âú£ËØû‰∏ªÈ¢òÊó•", 
                schedule: [
                    {time: "10:00", title: "‰∫§ÈÄöÔºöÊñ∞Âπ≤Á∫ø", desc: "‰∫¨ÈÉΩÁ´ô -> ‰∏ú‰∫¨Á´ô„ÄÇ\n‚ö†Ô∏è Âä°ÂøÖÈ¢ÑËÆ¢‚ÄúÁâπÂ§ßËç∑Áâ©„Çπ„Éö„Éº„Çπ„Å§„ÅçÂ∫ßÂ∏≠‚Äù„ÄÇ"},
                    {time: "13:30", title: "‰∫§ÈÄöÔºöÂú∞ÈìÅ", desc: "‰∏ú‰∫¨Á´ôÊç¢‰πò‰∏∏‰πãÂÜÖÁ∫ø (ËçªÊ¥ºÊñπÂêë) 4Á´ôËá≥„ÄêËµ§ÂùÇËßÅÈôÑÁ´ô„Äë„ÄÇ"},
                    {time: "14:00", title: "ÂÖ•‰ΩèÔºöHotel Hillarys", desc: "11Âè∑Âá∫Âè£Ê≠•Ë°å 2 ÂàÜÈíü„ÄÇ"},
                    {time: "15:30", title: "Info", desc: "üåü ÊøÄÊ¥ªÁ¨¨‰∏ÄÂº†‰∏ú‰∫¨Âú∞ÈìÅ‰∏âÊó•Âà∏„ÄÇ"},
                    {time: "Eve", title: "‰∏ú‰∫¨Â°î & È∫ªÂ∏ÉÂè∞", desc: "Ëµ§ÂùÇËßÅÈôÑÂùêÈì∂Â∫ßÁ∫ø -> Ê∫úÊ±†Â±±ÁéãÊç¢ÂçóÂåóÁ∫ø -> È∫ªÂ∏ÉÂçÅÁï™/Ëµ§ÁæΩÊ°•„ÄÇ\nÂÖ≠Êú¨Êú® Hills Âú£ËØûÂ∏ÇÈõÜ + È∫ªÂ∏ÉÂè∞ Hills Â§úÊôØ„ÄÇ"}
                ]
            },
            {
                day: 6, intensity: 4, title: "ÁÉ≠Êµ∑Ëä±ÁÅ´Â§ß‰ºöÊó•", 
                schedule: [
                    {time: "AM", title: "‰∏äÂçàÔºöÊ±†Ë¢ã", desc: "‰∏∏‰πãÂÜÖÁ∫øËá≥Ê±†Ë¢ãÁ´ô„ÄÇ\nChiikawa Land (Parco), Sunshine City„ÄÇ"},
                    {time: "PM", title: "ËΩ¨Âú∫Ôºö‰∏ú‰∫¨Á´ô", desc: "JR ÊπòÂçóÊñ∞ÂÆøÁ∫øËá≥‰∏ú‰∫¨Á´ô„ÄÇÈÄõ Kitte ÂïÜÂú∫Âíå‰∏ÄÁï™Ë°ó (mofusand)„ÄÇ"},
                    {time: "16:00", title: "‰∫§ÈÄöÔºöÊñ∞Âπ≤Á∫øËá≥ÁÉ≠Êµ∑", desc: "Êç¢‰πòÊñ∞Âπ≤Á∫øËá≥ÁÉ≠Êµ∑Á´ô„ÄÇ\n‚ö†Ô∏è Âä°ÂøÖÊèêÂâç‰π∞Â•ΩÂõûÁ®ãÊåáÂÆöÂ∏≠ÔºÅ"},
                    {time: "20:20", title: "ÁÉ≠Êµ∑Ëä±ÁÅ´Â§ß‰ºö", desc: "Êµ∑ËæπËßÇËµèÁÉüËä±„ÄÇ"},
                    {time: "21:30", title: "ËøîÁ®ã", desc: "Êñ∞Âπ≤Á∫øÂõû‰∏ú‰∫¨ -> ‰∏∏‰πãÂÜÖÁ∫øÂõûËµ§ÂùÇËßÅÈôÑ„ÄÇ"}
                ]
            },
            {
                day: 7, intensity: 4, title: "‰∏ú‰∫¨ÂíåÊúçÊëÑÂΩ±Êó•", 
                schedule: [
                    {time: "AM", title: "ÊµÖËçâ (ÂíåÊúç)", desc: "Èì∂Â∫ßÁ∫øËá≥ÊµÖËçâÁ´ô„ÄÇ\nÊµÖËçâÂØ∫ (Èõ∑Èó®/‰ª≤ËßÅ‰∏ñÈÄö) + Sanrio Gift Gate (ÂíåÊúç Kitty)„ÄÇ"},
                    {time: "Transfer", title: "ÈöÖÁî∞Â∑ùÊ≠•ÈÅì", desc: "Ê≠•Ë°åË∑®Ëøá Sumida River Walk (Á∫¶15ÂàÜÈíü) Ëá≥Êô¥Á©∫Â°î„ÄÇ"},
                    {time: "PM", title: "Êô¥Á©∫Â°î Solamachi", desc: "ÂøÖÈÄõÔºöPokemon Center (ÁÉàÁ©∫ÂùêÈôêÂÆö), Kirby Cafe, Donguri Republic (ÂêâÂçúÂäõ), LoFt„ÄÇ\nÂøÖÂêÉÔºöToriton ÂõûËΩ¨ÂØøÂè∏, Rokurinsha (ÂÖ≠ÂéòËàç) Ëò∏Èù¢, ÂèôÂèôËãë (30F ÁÉ§ËÇâ), Qu'il fait bon (È≤úÊûúÂ°î)„ÄÇ"},
                    {time: "Eve", title: "ËøîÁ®ã", desc: "Êäº‰∏äÁ´ô‰πòÂùêÂçäËóèÈó®Á∫øËá≥Ê∞∏Áî∞Áî∫ -> Êç¢‰πòËá≥Ëµ§ÂùÇËßÅÈôÑ„ÄÇ"}
                ]
            },
            {
                day: 8, intensity: 5, title: "ÂéüÂÆøÊ∂©Ë∞∑Êó∂Â∞öÊó•", 
                schedule: [
                    {time: "Info", title: "Á•®Âà∏", desc: "üåü ÊøÄÊ¥ªÁ¨¨‰∫åÂº†‰∏ú‰∫¨Âú∞ÈìÅ‰∏âÊó•Âà∏„ÄÇ"},
                    {time: "AM", title: "ÂçóÈùíÂ±± (Minami-Aoyama)", desc: "Èì∂Â∫ßÁ∫øËá≥Ë°®ÂèÇÈÅì (A4/A5)„ÄÇ\nPrada (Ëè±Ê†ºÂª∫Á≠ë), Acne Studios, Beauty & Youth, Thom Browne, Issey Miyake, 1LDK„ÄÇ"},
                    {time: "Noon", title: "Ë°®ÂèÇÈÅì (Omotesando)", desc: "Omotesando Hills, Gyre (MoMA/CDG), Ralph Lauren, Gentle Monster, Dover Street Market„ÄÇ"},
                    {time: "PM", title: "ÂéüÂÆø (Harajuku)", desc: "Ê≠•Ë°åËá≥Áå´Ë°ó (Cat Street)„ÄÇ\nHuman Made, Kith Treats, GR8, Beams Women, Supreme, Mofusand„ÄÇ"},
                    {time: "Eve", title: "Ê∂©Ë∞∑ (Shibuya)", desc: "ÂÆ´‰∏ãÂÖ¨Âõ≠ (Miyashita Park), Shibuya Parco (‰ªªÂ§©Â†Ç/HumanMade), Tower Records„ÄÇ\nÂõûÁ®ãÔºöÈì∂Â∫ßÁ∫øËøîÂõûËµ§ÂùÇËßÅÈôÑ„ÄÇ"}
                ]
            },
            {
                day: 9, intensity: 5, title: "‰∏ú‰∫¨Ëø™Â£´Â∞ºÊµ∑Ê¥ãÊó•", 
                schedule: [
                    {time: "07:00", title: "‰∫§ÈÄö", desc: "Ê∞∏Áî∞Áî∫(Êúâ‰πêÁî∫Á∫ø) -> Êñ∞Êú®Âú∫(JR‰∫¨Âè∂Á∫ø) -> ËàûÊª® -> Ëø™Â£´Â∞º‰∏ìÂàó„ÄÇ"},
                    {time: "08:30", title: "ÂøÖ‰π∞ DPA", desc: "Áø±Áøî (Soaring), Âú∞ÂøÉÊé¢Èô©‰πãÊóÖ (Journey)„ÄÇ"},
                    {time: "Route", title: "Ê∏∏Áé©Ë∑ØÁ∫ø (ÈÄÜÊó∂Èíà)", desc: "1. Áø±Áøî (ËßÜËßâÈ£ûË°å)\n2. Âú∞ÂøÉÊé¢Èô©‰πãÊóÖ (ÁÅ´Â±±ËøáÂ±±ËΩ¶)\n3. Êµ∑Â∫ï‰∏§‰∏áÈáå\n4. Âç∞Á¨¨ÂÆâÁ∫≥ÁêºÊñØ\n5. ÂøøÊÄíÂèåÁ•û (360Â∫¶ÁøªÊªö)\n6. ËæõÂ∑¥Ëææ‰º†Â•á‰πãÊóÖ (‰ºëÊÅØÂõûË°Ä)\n7. Ê∞¥‰∏äÈÄóË∂£Ëàπ\n8. Áé©ÂÖ∑ÊÄªÂä®Âëò (Â∞ÑÂáª)"},
                    {time: "Skip", title: "Ë∑≥Ëøá", desc: "ÊÉäÈ≠ÇÂè§Â°î (Ë∑≥Ê•ºÊú∫)„ÄÇ"}
                ]
            },
            {
                day: 10, intensity: 4, title: "ÊúÄÂêéÂÜ≤Âà∫Êó•", 
                schedule: [
                    {time: "AM", title: "‰∏∞Ê¥≤Â∏ÇÂú∫", desc: "Êúâ‰πêÁî∫Á∫øËá≥‰∏∞Ê¥≤ -> ÁôæÂêàÊµ∑È∏•Âè∑Ëá≥„ÄêÂ∏ÇÂú∫Ââç„Äë„ÄÇ\nÁæéÈ£üÔºöÂçÉÂÆ¢‰∏áÊù•Âå∫ÂüüÊàñÂ§ßÂíåÂØøÂè∏„ÄÇ"},
                    {time: "PM", title: "Êñ∞ÂÆø (Shinjuku)", desc: "ÁôæÂêàÊµ∑È∏•Âè∑Âõû‰∏∞Ê¥≤ -> Êúâ‰πêÁî∫Á∫øËá≥Â∏ÇË∞∑ -> ÈÉΩËê•Êñ∞ÂÆøÁ∫øËá≥Êñ∞ÂÆø„ÄÇ"},
                    {time: "Shop", title: "Ë¥≠Áâ©Ê∏ÖÂçï", desc: "1. L-Breath (Êà∑Â§ñÈú≤Ëê•)\n2. NEWoMan (Â∞è‰ºóÈ¶ôÊ∞õ)\n3. ‰ºäÂäø‰∏π Isetan (ÊúÄÂº∫Áî∑Ë£Ö/Âú∞‰∏ãÁîúÂìÅ)\n4. Lumine EST (Âπ¥ËΩªÊΩÆÊµÅÂ•≥Ë£Ö)"},
                    {time: "Eve", title: "ËøîÁ®ã", desc: "‰∏∏‰πãÂÜÖÁ∫øËøîÂõûËµ§ÂùÇËßÅÈôÑ„ÄÇ"}
                ]
            },
            {
                day: 11, intensity: 2, title: "ÂâçÂæÄ‰∏ú‰∫¨ÊàêÁî∞Êú∫Âú∫ËøîÁ®ãÊó•", 
                schedule: [
                    {time: "10:00", title: "ÂâçÂæÄÊú∫Âú∫", desc: "Èì∂Â∫ßÁ∫øËá≥‰∏äÈáéÁ´ô -> Êç¢‰πò Keisei Skyliner Áõ¥ËææÊàêÁî∞Êú∫Âú∫ T1„ÄÇ"},
                    {time: "15:00", title: "Ëà™Áè≠Ôºöee", desc: "CA930 ‰∏ú‰∫¨ÊàêÁî∞T1 - ‰∏äÊµ∑Êµ¶‰∏úT2 (15:00-17:25)"},
                    {time: "14:35", title: "Ëà™Áè≠Ôºöhcj", desc: "CZ8102 ‰∏ú‰∫¨ÊàêÁî∞T1 - ÂπøÂ∑ûÁôΩ‰∫ëT2 (14:35Ëµ∑È£û)"}
                ]
            }
        ];

        // === LOGIC ===
        let currentSongIdx = 0;
        let isPlaying = false;
        const audio = document.getElementById('audio-player');

        function goToLogin() {
            document.getElementById('intro-layer').classList.add('fade-out-absolute');
            document.getElementById('login-layer').classList.add('blur-layer-active');
            initIpod();
        }

        function enterMainSite(uid) {
            const user = users[uid];
            document.getElementById('nav-avatar').src = user.avatar;
            document.getElementById('nav-username').innerText = user.name;
            document.getElementById('nav-site-title').innerText = `${uid} in Japan`;

            document.getElementById('scene-container').classList.add('slide-up-leave');
            document.getElementById('main-content').classList.remove('hidden');
            setTimeout(() => document.getElementById('main-content').classList.remove('opacity-0'), 100);
            
            setTimeout(() => {
                document.getElementById('scene-container').style.display = 'none';
                document.body.style.overflowY = 'auto';
            }, 1000);
        }

        function initIpod() { 
            updateIpodScreen(); 
            audio.addEventListener('timeupdate', updateProgressBar);
            audio.addEventListener('ended', nextSong);
        }

        function updateIpodScreen() {
            const song = playlist[currentSongIdx];
            document.getElementById('ipod-title').innerText = song.title;
            document.getElementById('ipod-artist').innerText = song.artist;
            document.getElementById('ipod-album').innerText = song.album;
            document.getElementById('ipod-art').src = song.cover;
            
            document.getElementById('total-time').innerText = formatTime(song.length);
            document.getElementById('curr-time').innerText = "0:00";
            document.getElementById('ipod-bar').style.width = "0%";
        }

        function togglePlay() {
            if(audio.paused) {
                audio.play();
                isPlaying = true;
                document.getElementById('play-icon').innerText = '‚ñ∂';
            } else {
                audio.pause();
                isPlaying = false;
                document.getElementById('play-icon').innerText = '||';
            }
        }

        function nextSong() {
            currentSongIdx = (currentSongIdx + 1) % playlist.length;
            resetAndPlay();
        }

        function prevSong() {
            currentSongIdx = (currentSongIdx - 1 + playlist.length) % playlist.length;
            resetAndPlay();
        }

        function resetAndPlay() {
            updateIpodScreen();
            audio.currentTime = 0;
            if(isPlaying) audio.play();
        }

        function updateProgressBar() {
            const song = playlist[currentSongIdx];
            const duration = song.length; 
            const current = audio.currentTime;
            
            if(current >= audio.duration) { audio.currentTime = 0; audio.play(); }

            const pct = (current / duration) * 100 * 5; // Simulation speed
            
            if(pct <= 100) {
                document.getElementById('ipod-bar').style.width = pct + '%';
                const fakeCurrent = duration * (pct/100);
                document.getElementById('curr-time').innerText = formatTime(fakeCurrent);
                document.getElementById('total-time').innerText = '-' + formatTime(duration - fakeCurrent);
            } else {
                nextSong(); 
            }
        }

        function formatTime(s) {
            const m = Math.floor(s / 60);
            const sec = Math.floor(s % 60);
            return `${m}:${sec < 10 ? '0'+sec : sec}`;
        }

        function renderEssentials() {
            const container = document.getElementById('essentials-grid');
            let html = '';
            essentialsData.forEach(cat => {
                let content = '';
                if(cat.type === 'hotel') {
                    content = cat.items.map(h => `
                        <li class="flex flex-col gap-2 mb-4">
                            <div class="text-white font-bold text-base"><span class="text-red-600 mr-2">‚ñ™</span>${h.city}Ôºö${h.name}</div>
                            <div class="text-gray-300 text-sm font-mono select-all border-l-2 border-zinc-700 pl-3">${h.addr}</div>
                        </li>`).join('');
                } else if (cat.type === 'emergency') {
                    content = cat.items.map(e => `
                        <li class="flex items-center gap-3 mb-3">
                            <span class="text-red-600 font-bold w-12 text-lg">${e.num}</span><span class="text-gray-300 text-sm">${e.label}</span>
                        </li>`).join('');
                } else {
                    content = cat.items.map(i => `
                        <li class="flex flex-col gap-1 mb-3">
                            <span class="text-white font-bold text-base flex items-center gap-2"><span class="text-red-600">‚ñ™</span> ${i}</span>
                        </li>`).join('');
                }
                html += `<div><h4 class="text-white font-bold mb-4 border-b border-zinc-700 pb-2">${cat.title} <span class="text-xs text-zinc-500 ml-2">${cat.cn}</span></h4><ul class="">${content}</ul></div>`;
            });
            container.innerHTML = html;
        }

        function renderItinerary() {
            document.getElementById('overview-grid').innerHTML = overviewData.map((d, i) => `
                <div onclick="jumpToDay(${i})" class="overview-card bg-black p-6 md:p-8 hover:bg-zinc-900 transition duration-300 group h-full border-r border-zinc-800 last:border-r-0">
                    <div class="text-xs text-zinc-500 font-mono mb-3 border-b border-zinc-800 pb-2 flex justify-between">
                        <span>${d.date}</span><span class="text-red-600 opacity-0 group-hover:opacity-100 transition">GO ‚Üí</span>
                    </div>
                    <div class="flex justify-between items-baseline mb-3">
                        <span class="text-xl serif italic text-white group-hover:text-red-600 transition">Day ${d.day}</span>
                        <span class="text-[10px] uppercase tracking-widest text-red-600 border border-red-600/30 px-2 py-0.5 rounded-full">${d.loc}</span>
                    </div>
                    <p class="text-sm text-gray-400 group-hover:text-white transition font-light leading-snug">${d.act}</p>
                </div>`).join('');

            document.getElementById('day-nav-container').innerHTML = dailyData.map((d, i) => `
                <button onclick="switchDay(${i})" id="nav-btn-${i}" class="day-nav-item w-full text-left py-4 px-4 md:pl-6 text-sm uppercase tracking-widest text-gray-400 hover:text-black flex-shrink-0 transition-all duration-300">
                    <span class="font-bold">Day ${d.day}</span>
                    <span class="hidden md:inline ml-2 text-[10px] text-gray-400 uppercase tracking-wider">/ ${overviewData[i].loc}</span>
                </button>`).join('');
        }

        function switchDay(index) {
            document.querySelectorAll('.day-nav-item').forEach((btn, i) => {
                if(i === index) btn.classList.add('active', 'text-black');
                else btn.classList.remove('active', 'text-black', 'text-gray-400');
            });
            const data = dailyData[index];
            
            // Sound Wave Visualizer
            let waveHtml = '';
            const lineCount = 50; 
            const maxWidth = data.intensity * 12; 
            
            for (let i = 0; i < lineCount; i++) {
                const distFromCenter = Math.abs(i - lineCount/2);
                const width = Math.max(4, Math.random() * maxWidth * (1 - distFromCenter/lineCount));
                const opacity = (i % 2 === 0) ? '1' : '0.6';
                waveHtml += `<div class="wave-line-item bg-red-600" style="width: ${width}px; opacity: ${opacity};"></div>`;
            }

            document.getElementById('day-content-container').innerHTML = `
                <div class="flex-1 fade-in-up">
                    <div class="flex items-center gap-4 mb-4">
                        <span class="text-red-600 font-bold tracking-widest text-xs uppercase border border-red-600 px-3 py-1">${overviewData[index].date}</span>
                        <span class="text-gray-400 font-serif italic text-xl">${overviewData[index].loc}</span>
                    </div>
                    <h2 class="text-3xl md:text-5xl font-bold text-black tracking-tight mb-12">${data.title}</h2>
                    <div class="grid gap-12">
                        ${data.schedule.map(item => `
                            <div class="grid grid-cols-1 md:grid-cols-[100px_1fr] gap-2 md:gap-10 group">
                                <div class="text-sm font-mono text-gray-400 pt-1 group-hover:text-red-600 font-bold">${item.time}</div>
                                <div>
                                    <h3 class="text-xl serif font-medium mb-2 text-black">${item.title}</h3>
                                    <p class="text-gray-600 text-sm leading-relaxed whitespace-pre-line border-l-2 border-transparent group-hover:border-red-600 group-hover:pl-4 transition-all">${item.desc}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
                <div class="hidden md:flex flex-col items-center w-24 pt-20 border-l border-gray-100 pl-4 fade-in-up delay-200 sticky top-20 h-fit">
                    <div class="text-[10px] uppercase tracking-widest text-gray-400 mb-4 [writing-mode:vertical-lr]">Intensity</div>
                    <div class="sound-wave-container">
                        ${waveHtml}
                    </div>
                    <div class="mt-4 text-xs font-bold text-red-600 font-mono">${data.intensity}/5</div>
                </div>
            `;
        }

        function jumpToDay(index) {
            document.getElementById('daily').scrollIntoView({ behavior: 'smooth' });
            setTimeout(() => switchDay(index), 300);
        }

        window.onload = () => {
            renderEssentials();
            renderItinerary();
            switchDay(0);
            
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    if(!section.id) return;
                    if (pageYOffset >= (section.offsetTop - section.clientHeight / 3)) current = section.id;
                });
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').includes(current)) link.classList.add('active');
                });
            });
        };
    </script>
</body>
</html>
